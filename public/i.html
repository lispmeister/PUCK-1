<!DOCTYPE html>
<html lang="en">
  <head>

<meta charset="utf-8">
<title>PUCKasaurus Rex!</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="rawr!">

<!-- Le styles -->
<!-- <link href="/css/bootstrap.min.css" rel="stylesheet"> -->

<!-- made a one line change in this, noted at top -->

<!-- for calls -->

<link href="/css/jquery.mCustomScrollbar.css" rel="stylesheet">

<style>

    .output{margin:20px 40px;}
    .output a{display:inline-block; text-decoration:none; padding:3px 15px; -webkit-border-radius:15px; -moz-border-radius:15px; border-radius:15px; background:#000; margin:5px 20px 5px 0;}
    .content { margin:40px; width:1000px; height:500px; padding:20px; overflow:auto; background:#ddd; -webkit-border-radius:3px; -moz-border-radius:3px; border-radius:3px;}

</style>

<body>

    <div id="ovpn_client_infinity" class="content">
        <p>VPN client logs <hr/></p>
    </div>

    <hr />

    <!-- content block -->
    <div id="ovpn_server_infinity" class="content">
        <p>VPN server logs <hr/></p>
    </div>

</body>


<script type="text/javascript" src="/js/jquery-2.1.0.min.js"></script>
<script type="text/javascript" src="/js/jquery.mCustomScrollbar.concat.js"></script>

<script src="/socket.io/socket.io.js"></script>

<script type="text/javascript">




$(document).ready(function() {
            $("#ovpn_client_infinity").mCustomScrollbar({ scrollButtons:{ enable:true } });
            $("#ovpn_server_infinity").mCustomScrollbar({ scrollButtons:{ enable:true } });

            var socket = io.connect(':8080/');

            var ovpn_slogs = 'openvpn_server_logs'
            var ovpn_clogs = 'openvpn_client_logs'

            socket.on('connect', function(){
                console.log('general connext note')
                socket.on('cat_facts', function (data) {
                    console.log('cat facts!')
                    console.log(data)

                    $('body').append('<div>' + data + '</div>')

                    console.log('sending foo bak')
                    socket.emit('puck_chat', 'foo', function (data) {
                        console.log('returned... ')
                        console.log(data)
                    })

                })
                socket.emit('puck', 'foo', function (data) {
                    console.log('hey pucks... ')
                    console.log(data)
                })

            })


//          socket.join('openvpn_client_logs', function() {
//              console.log('joined ' + ovpn_clogs)
//          })
//          socket.join('openvpn_server_logs', function() {
//              console.log('joined ' + ovpn_slogs)
//          })

            socket.on(ovpn_clogs, function (data) {
                console.log('client: ' + data.line)
                $("#ovpn_client_infinity .mCSB_container").append('<div class="log_line">' + data.line + "</div>")
                $("#ovpn_client_infinity").mCustomScrollbar("update")
                $("#ovpn_client_infinity").mCustomScrollbar("scrollTo",".log_line:last",{scrollInertia:2500,scrollEasing:"easeInOutQuad"})
            })

            socket.on(ovpn_slogs, function (data) {
                console.log('server: ' + data.line)
                $("#ovpn_server_infinity .mCSB_container").append('<div class="log_line">' + data.line + "</div>")
                $("#ovpn_server_infinity").mCustomScrollbar("update")
                $("#ovpn_server_infinity").mCustomScrollbar("scrollTo",".log_line:last",{scrollInertia:2500,scrollEasing:"easeInOutQuad"})
            })
    })

</script>
