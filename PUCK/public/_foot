<script type="text/javascript" src="/js/jquery.1.10.0.min.js"></script>
<script type="text/javascript" src="/primus/primus.js"></script>

<script>

// load all this stuff after everything else


http://stackoverflow.com/questions/951021/what-do-i-do-if-i-want-a-javascript-version-of-sleep
function sleep(millis, callback) {
    setTimeout(function()
            { callback(); }
    , millis);
}
function foobar_cont(){
    console.log("finished.");
};



// <button class="show-page-loading-msg" data-theme="a" data-textonly="false" data-textvisible="true" data-msgtext="Loading theme b" data-icon="arrow-r" data-iconpos="right">Theme b</button>


// Roiling, rolling, rolling, though the streams are swollen, keep them doggies rolling 
scripps = ['/js/jquery-ui.1.9.2.min.js',
           '/js/bootstrap.js',
           '/js/moustache.js',
           '/js/jquery.adipoli.min.js',
           '/js/jquery.json-2.4.min.js',
           '/js/jquery.inputmask.js',
           '/js/spin.js',
           '/js/jquery.blockUI.js',
           '/js/jquery.avgrund.js']

// triggered at the end

// when the streams are swollin

function addScripts() {
    var len = scripps.length;
    console.log(len)
    for (var i = 0; i < len; i++) {
        scriptz = scripps[i]
        console.log(i + ") " + scriptz)
        loadScript(scriptz)
    }

    sleep(1000, foobar_cont);
    // for some reason... needs to *really* have everything loaded first
    loadScript('/js/puck.js')
}

// Head 'em up, move 'em out, Move 'em on, head 'em out!
function loadScript(url) {
    console.log('adding ' + url)
    var element = document.createElement("script");
    element.src = url;
    document.body.appendChild(element);
    console.log(element)
}


// Don't try to understand 'em, just rope, throw and brand 'em, soon we'll be living high and wide 
if (window.addEventListener) {
    console.log('window.addEventListener')
    window.addEventListener("load", addScripts, false)
}
else if (window.attachEvent) {
    console.log('window.attachEvent')
    window.attachEvent("onload", addScripts)
}
else {
    console.log('window.onload')
    window.onload = addScripts
}

</script>

